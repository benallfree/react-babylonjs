---
title: 'Under 50 Lines of Code: react-babylonjs'
slug: 'react-with-declarative-babylonjs'
---

In previous sections, we saw how to:

- Create a boilerplate React app
- Instantiate a Babylon.js scene imperitively
- Shoehorn the above into React in about 150 lines of code, still not "reactive"
  or declarative
- Reduce 150 lines of code to 60 by moving some of it into a 3rd party package,
  but still not reactive or declarative

But now, we'll see how to do the exact same thing in **just under 50 lines of
code using a true reactive/declarative approach**.

We also learn how to make custom Babylon React components, and how to use some
helpful hooks like `useScene`, `useBeforeRender`.

```tsx codesandbox=rbjs?entry=./src/App.tsx
import { Vector3 } from '@babylonjs/core'
import { FC, useRef } from 'react'
import { Engine, Scene, useBeforeRender, useScene } from 'react-babylonjs'

const RPM = 5

const MovingBox: FC = (props) => {
  // access Babylon Scene
  const scene = useScene()
  // access refs to Babylon objects in scene like DOM nodes
  const boxRef = useRef<JSX.IntrinsicElements['box']>(null)

  useBeforeRender(() => {
    if (!boxRef.current?.rotation) return
    if (!scene) return
    const deltaTimeInMillis = scene.getEngine().getDeltaTime()
    boxRef.current.rotation.y +=
      (RPM / 60) * Math.PI * 2 * (deltaTimeInMillis / 1000)
  })

  return (
    <box ref={boxRef} name="box" size={2} position={new Vector3(0, 1, 0)} />
  )
}

const App: FC = () => (
  <div style={{ flex: 1, display: 'flex' }}>
    <Engine antialias adaptToDeviceRatio canvasId="babylonJS">
      <Scene>
        <freeCamera
          name="camera1"
          position={new Vector3(0, 5, -10)}
          setTarget={[Vector3.Zero()]}
        />
        <hemisphericLight
          name="light1"
          intensity={0.7}
          direction={new Vector3(0, 1, 0)}
        />
        <MovingBox />
        <ground name="ground" width={6} height={6} />
      </Scene>
    </Engine>
  </div>
)

export default App
```
