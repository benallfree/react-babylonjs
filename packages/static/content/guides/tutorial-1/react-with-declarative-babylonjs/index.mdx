---
title: 'Under 50 Lines of Code: react-babylonjs'
sort: 500
---

In previous sections, we saw how to:

- Create a boilerplate React app
- Instantiate a Babylon.js scene imperitively
- Shoehorn the above into React in about 150 lines of code, still not "reactive"
  or declarative
- Reduce 150 lines of code to 60 by moving some of it into a 3rd party package,
  but still not reactive or declarative

But now, we'll see how to do the exact same thing in **just under 50 lines of
code using a true reactive/declarative approach**.

We also learn how to make custom Babylon React components, and how to use some
helpful hooks like `useScene`, `useBeforeRender`.

First, let's take a look at what a basic React structure looks like:

```tsx
import { Engine, Scene } from 'react-babylonjs'

const BasicScene: FC = ({ children }) => (
  <Engine antialias adaptToDeviceRatio canvasId="babylonJS">
    <Scene>{children}</Scene>
  </Engine>
)
```

The above code introduces the `Engine` and `Scene` tags of `react-bablylonjs`.
These perform boilerplate initialization. Everything you might like to add to a
scene will go inside the `Scene` tag.

Next, we are going to define a camera, some light, and a ground surface. At this
point, it's important to understand a Typescript concept known as
[intrinsic JSX](https://www.typescriptlang.org/docs/handbook/jsx.html#intrinsic-elements).
Where we had to explicitly import `Egnine` and `Scene`, there are many tags
related to Babylon.js that are already known to React. We will use `freeCamera`,
`hemisphericLight`, and `ground`.

First, let's make a little helper function. Babylon.js defines a `Vector3` class
which is used very frequently. We'll make a helper for it. When you see `v3`
anywhere, it's coming from this:

```tsx
import { Vector3 } from '@babylonjs/core'

const v3 = (x = 0, y = 0, z = 0) => new Vector3(x, y, z)
```

Now with that in place, here's how we can add a camera, light, and ground to our
scene.

```tsx
<BasicScene>
  <freeCamera name="camera1" position={v3(0, 5, -10)} setTarget={[v3()]} />
  <hemisphericLight name="light1" intensity={0.7} direction={v3(0, 1, 0)} />
  <ground name="ground" width={6} height={6} />
</BasicScene>
```

Here's the final result of that basic scene:

[devtool:BasicScene.tsx]

Now that we have a basic scene in place, let's make that spinning box like we
did before, but this time, do it React style.

```tsx
<box name="box" size={2} position={v3(0, 1, 0)} />
```

```tsx
const RPM = 5

const MovingBox: FC = () => {
  // access Babylon Scene
  const scene = useScene()
  // access refs to Babylon objects in scene like DOM nodes
  const boxRef = useRef<JSX.IntrinsicElements['box']>(null)

  useBeforeRender(() => {
    if (!boxRef.current?.rotation) return
    if (!scene) return
    const deltaTimeInMillis = scene.getEngine().getDeltaTime()
    boxRef.current.rotation.y +=
      (RPM / 60) * Math.PI * 2 * (deltaTimeInMillis / 1000)
  })

  return (
    <box ref={boxRef} name="box" size={2} position={new Vector3(0, 1, 0)} />
  )
}
```

[devtool:Declarative.tsx]
